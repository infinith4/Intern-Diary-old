use strict;
use warnings;

use WebService::Simple::Google::Chart;

my $chart = WebService::Simple::Google::Chart->new;
my $url = $chart->get_url(
    {
        chs => "250x100",
        cht => "p3",
   },
    { foo => 200, bar => 130, hoge => 70 }
);
$url="http://chart.apis.google.com/chart?chs=350x350&chd=t:607.428923201922,145.303539760297,782.710882307572,589.656240351696,236.213062265105,92.7825994227107,816.138057335173,535.26502052858,364.073746126475,552.810216615803,3928.61376080079,789.51106259253,213.462031289744,291.67863250585,628.482009537894,388.301762479929,997.818837433036,1671.72468224771,857.418814719649,565.15266875208,758.497473518083,369.943105192166,246.072471982833,119.148561476827,522.133478837492,529.827366885181,928.638800767891,571.953805035127,2222.85812732528,569.737644297123,242.517588286326,668.097842343379,486.301260606362,944.132246152141,1332.78425416792,198.371027065985,314.644716018484,327.463888743696,585.897582854305,74.2278128087656,804.417077265492|95.9664927093364,84.3331733566069,145.54046847957,120.041428290959,110.343858825127,73.2919668106433,171.777669914444,139.460174257508,129.962051697259,147.133381051716,666.297940415027,166.912743979345,79.4204006643457,86.5226977174941,148.52022657341,127.093434044612,203.922962282202,296.548324307565,182.80990788536,137.111061955166,177.871915242782,99.5415451491156,52.0405635675654,72.0013959769334,144.165603349157,142.727174882355,216.646835550191,137.529417083366,394.91994794729,142.979126895711,107.69102629359,157.944335174847,133.104052694291,189.224714294743,252.368159403031,62.2346243980651,104.551791557447,107.368294418234,151.443386777873,73.9132267957236,171.514917537751&cht=s&chds=73.2278128087656,3929.61376080079,52.0405635675654,666.297940415027&chxt=x,y&chxr=0,73.2278128087656,3929.61376080079|1,52.0405635675654,666.297940415027&chdl=&chdl=Phoenix               |LittleRock           |SanFrancisco        |Denver                |Hartford              |Wilmington            |Washington           |Jacksonville          |Miami                |Atlanta              |Chicago             |Indianapolis         |DesMoines           |Wichita             |Louisville           |NewOrleans           |Baltimore            |Detroit               |Minneapolis-St.Paul|KansasCity         |St.Louis            |Omaha                 |Alburquerque        |Albany              |Buffalo             |Cincinnati          |Cleveland            |Columbus              |Philadelphia         |Pittsburgh           |Providence            |Memphis              |Nashville          |Dallas                 |Houston             |SaltLakeCity        |Norfolk             |Richmond             |Seattle              |Charleston           |Milwaukee             &chco=dde02c|ddf864|62729e|48ba74|773959|8a3405|43634b|b6c9e2|119c62|bda554|5e7d35|e2b9f1|2d9766|8bc145|ae742c|55dcc6|b82969|652544|7baacb|e51ae3|c42a99|22a145|df937a|a277b2|debeba|404702|09bb5c|68c307|541e19|024848|96df5c|f9fd2d|5b600d|cab053|334ca2|cf8514|a37c13|1fb6ae|a6e1ec|9fc4f7|a1ed62";
#http://chart.apis.google.com/chart?cht=p3&chl=bar%7Cfoo%7Choge&chs=250x100&chd=t%3A33%2C50%2C18
print $url . "\n";

#一度 get_url でパラメータを渡したら、ファイル名を指定するだけで書き出せる
$chart->render_to_file("foo.png");
